trigger:
- main

pool:
  name: Default  # Self-hosted Agent „ÅÆÂêçÂâç

steps:
- checkout: self

- script: |
    echo üîç [Build Info]
    echo Build.SourceBranch: %BUILD_SOURCEBRANCH%
    echo Build.Reason: %BUILD_REASON%
    echo Build.RequestedFor: %BUILD_REQUESTEDFOR%
    echo Build.RequestedForEmail: %BUILD_REQUESTEDFOREMAIL%
    echo Agent.Name: %AGENT_NAME%
    echo Agent.OS: %AGENT_OS%
    echo Agent.MachineName: %AGENT_MACHINENAME%
    echo System.TeamProject: %SYSTEM_TEAMPROJECT%
    echo System.CollectionUri: %SYSTEM_COLLECTIONURI%
  displayName: 'üîç Show Pipeline Context'

- script: |
    cd terraform
    terraform init
    terraform plan
    terraform apply -auto-approve
  displayName: '‚öôÔ∏è Run Terraform'
